# Deploy Worker to Cloudflare - Quick Guide

## Why Deploy?

We made changes to `worker-d1.js`:
- ✅ Removed old VPS mastering endpoints
- ✅ Added new mastering endpoints pointing to persistent tunnel
- ✅ These changes need to be deployed to take effect

## Deploy Methods:

### Method 1: Using Wrangler CLI (Recommended)

```bash
# 1. Make sure you're in the project directory
cd "/Users/nicopan/online master"

# 2. Login to Cloudflare (if not already logged in)
npx wrangler login

# 3. Deploy the worker
npx wrangler deploy --config wrangler-d1.toml
```

### Method 2: Using Cloudflare Dashboard

1. Go to: https://dash.cloudflare.com
2. Workers & Pages → `audio-city-api-d1`
3. Click "Edit code" or "Quick edit"
4. Copy the entire contents of `worker-d1.js`
5. Paste into the editor
6. Click "Save and Deploy"

## After Deployment:

The new mastering endpoints will be active:
- POST /api/quick-master → https://mastering.audiocity-ug.com
- GET /api/master-status/:id → https://mastering.audiocity-ug.com

## Verify Deployment:

After deploying, test that it works:
- Try using the mastering feature on your site
- Check worker logs in Cloudflare dashboard
- Verify requests go to the new persistent URL

## Current Status:

- ✅ Code is ready (worker-d1.js)
- ✅ Configuration is ready (wrangler-d1.toml)
- ⏳ Needs deployment to Cloudflare
- ✅ Environment variable already set (MASTERING_SERVER_URL)
